# ex02 知识点讲解：变量 + 多文件编译

本关目标：理解“为什么 Makefile 必须变量化”，以及多文件怎么编译链接。

---

## 1) 为什么要变量化

把这些提成变量是为了可维护和可覆盖：

- `CXX`：编译器
- `CXXFLAGS`：编译选项
- `INCLUDES`：头文件路径
- `TARGET/SRCS/OBJS`：工程文件组织

同一个 Makefile，换编译器只要：

```bash
make CXX=clang++
```

---

## 2) 多文件编译两步走

第一步：每个 `.cpp` 编译成 `.o`  
第二步：把所有 `.o` 链接成可执行程序

本关里：

- `build/main.o`、`build/math_utils.o` 是中间产物
- `calc` 是最终可执行程序

---

## 3) 为什么要显式写 `build/main.o: ...`

因为你要清楚表达依赖关系：

- `main.cpp` 依赖 `math_utils.h`
- `math_utils.cpp` 也依赖 `math_utils.h`

头文件改了，相关 `.o` 必须重编。

---

## 4) `run` 和 `clean` 的意义

- `run`：减少你手动敲命令的成本
- `clean`：清除产物，避免脏状态影响判断

---

## 5) TASK 推荐做法

1. 先 `make` + `make run`
2. 试 `make CXX=clang++`
3. 试 `make CXXFLAGS='-O0 -g -std=c++17 -Wall -Wextra'`
4. 给程序加参数，再让 `run` 支持 `ARGS`

示例：

```make
run: $(TARGET)
	./$(TARGET) $(ARGS)
```

然后：

```bash
make run ARGS="10 20"
```

---

## 6) 常见错误

- 链接报错 `undefined reference`：漏了某个 `.o`
- include 报错：`-Iinclude` 没配好
- 改了头文件但没重编：依赖没写全
