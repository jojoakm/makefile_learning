# ex01 知识点讲解：最小 Makefile

本关目标：你不查外部资料，也能看懂并改动最基础的 Makefile。

---

## 1) 最小规则结构

Makefile 的核心只有一件事：

```make
target: dependencies
	命令
```

- `target`：你要生成的东西（这里是 `hello`）
- `dependencies`：生成它所依赖的文件（这里是 `main.c`）
- 命令：如何生成（这里是 `gcc ...`）

---

## 2) 本关变量分别干什么

- `CC`：编译器（默认 `gcc`）
- `CFLAGS`：编译参数（优化、告警等）
- `TARGET`：最终产物名
- `SRC`：源码文件

你可以命令行覆盖变量，例如：

```bash
make CFLAGS="-O0 -g -Wall -Wextra"
```

---

## 3) 自动变量（先记两个）

在规则里常用：

- `$<`：第一个依赖（这里等于 `main.c`）
- `$@`：当前目标（这里等于 `hello`）

所以这一句：

```make
$(CC) $(CFLAGS) $< -o $@
```

就是：用 `CC + CFLAGS` 把 `main.c` 编译成 `hello`。

---

## 4) `.PHONY` 是什么

`.PHONY: all run clean help` 表示这些是“命令名”，不是文件名。  
避免目录里碰巧出现同名文件导致命令失效。

---

## 5) 你做 TASK 时的推荐顺序

1. `make help` 看目标
2. `make` 编译
3. `make run` 运行
4. 改 `CFLAGS` 再编译一次
5. 加 `print-vars` 目标打印变量值

---

## 6) 常见错误

- `missing separator`：命令前用了空格，不是 Tab
- 编译参数不生效：你改了 `CFLAGS` 但没重新编译
- 想“打开 hello 看源码”：`hello` 是可执行文件，不是源码
